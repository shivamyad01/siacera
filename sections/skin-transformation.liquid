<section class="skin-transformation-section">
  <div class="skin-transformation-wrapper">
    
    <!-- Left Side -->
    <div class="skin-left">
      {% if section.settings.left_image != blank %}
        <img src="{{ section.settings.left_image | image_url: width: 800 }}" alt="Skin Transformation Image" class="skin-left-image" loading="lazy">
      {% endif %}
      <div class="skin-left-content">
        <h2 class="skin-heading">{{ section.settings.heading }}</h2>
        <a href="{{ section.settings.button_link }}" class="skin-button">
          {{ section.settings.button_text }}
        </a>
      </div>
    </div>

    <!-- Right Side (Slider) -->
    <div class="skin-right">
      <div class="skin-slider" id="skinSlider-{{ section.id }}">
        {% for block in section.blocks %}
          <div class="skin-slide">
            {% if block.settings.slide_image != blank %}
              <img src="{{ block.settings.slide_image | image_url: width: 800 }}" alt="Slide Image" loading="lazy">
            {% endif %}
          </div>
        {% endfor %}
      </div>
      <div class="slider-controls">
        <button type="button" class="prev-btn" aria-label="Previous">&#8592;</button>
        <button type="button" class="next-btn" aria-label="Next">&#8594;</button>
      </div>

      <div class="skin-right-content">
        <h3>{{ section.settings.subheading }}</h3>
        <p>{{ section.settings.description }}</p>
      </div>
    </div>

  </div>
</section>

<style>
.skin-transformation-wrapper {
  display: flex;
  align-items: flex-start;
  justify-content: center;
  gap: 2rem;
  flex-wrap: wrap;
  margin: 40px auto;
  max-width: 1200px;
}

.skin-left, .skin-right {
  flex: 1 1 48%;
  position: relative;
}

.skin-left-image {
  width: 100%;
  border-radius: 6px;
  object-fit: cover;
}

.skin-left-content {
  position: absolute;
  bottom: 30px;
  left: 30px;
  color: #fff;
}

.skin-heading {
  font-size: 1.6rem;
  font-weight: 500;
  margin-bottom: 0.6rem;
}

.skin-button {
  font-size: 0.9rem;
  color: #e3e600;
  text-decoration: none;
  font-weight: 600;
  border-bottom: 1px solid #e3e600;
}

.skin-slider {
  position: relative;
  overflow: hidden;
  width: 100%;
  height: auto;
}

.skin-slide {
  display: none;
}

.skin-slide.active {
  display: block;
  animation: fade 0.8s ease;
}

.skin-slide img {
  width: 100%;
  border-radius: 6px;
  object-fit: cover;
}

.slider-controls {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  margin-top: 10px;
}

.prev-btn, .next-btn {
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  color: #1a3a32;
  transition: opacity 0.3s;
}

.prev-btn:hover, .next-btn:hover {
  opacity: 0.7;
}

.skin-right-content {
  margin-top: 1rem;
}

.skin-right-content h3 {
  font-size: 1.3rem;
  font-weight: 600;
  margin-bottom: 0.3rem;
}

.skin-right-content p {
  font-size: 0.85rem;
  color: #444;
}

@keyframes fade {
  from {opacity: 0;}
  to {opacity: 1;}
}
</style>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const slider = document.querySelector("#skinSlider-{{ section.id }}");
  if (!slider) return;
  const slides = slider.querySelectorAll(".skin-slide");
  let current = 0;

  function showSlide(index) {
    slides.forEach((slide, i) => slide.classList.toggle("active", i === index));
  }

  showSlide(current);

  const nextBtn = slider.parentElement.querySelector(".next-btn");
  const prevBtn = slider.parentElement.querySelector(".prev-btn");

  nextBtn.addEventListener("click", () => {
    current = (current + 1) % slides.length;
    showSlide(current);
  });

  prevBtn.addEventListener("click", () => {
    current = (current - 1 + slides.length) % slides.length;
    showSlide(current);
  });
});
</script>

{% schema %}
{
  "name": "Skin Transformation",
  "settings": [
    {
      "type": "image_picker",
      "id": "left_image",
      "label": "Left Image"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "We transform skin health from the inside out."
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "EXPLORE ALL PRODUCTS"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Right Side Heading",
      "default": "Rigorously Tested in Human Clinical Trials"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "*Based on an 8-week clinical trial in 30 healthy female participants between the ages of 40â€“69 years old, using NAD+ Cell Restoration Cream and Retinol Peptide Booster."
    }
  ],
  "blocks": [
    {
      "type": "image",
      "name": "Slider Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "slide_image",
          "label": "Upload Image"
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Skin Transformation"
    }
  ]
}
{% endschema %}
